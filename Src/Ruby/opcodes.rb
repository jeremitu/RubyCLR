# This file contains a list of all CIL op-codes, and the types of any parameters
# that they take. It is used by the RbDynamicMethod library.

module RbDynamicMethod
private
  @@op_codes = { 
    'add'            => nil,
    'add_ovf'        => nil,
    'add_ovf_un'     => nil,
    'and'            => nil,
    'arglist'        => nil,
    'beq'            => 'l',
    'beq_s'          => 'l',
    'bge'            => 'l',
    'bge_s'          => 'l',
    'bge_un'         => 'l',
    'bge_un_s'       => 'l',
    'bgt'            => 'l',
    'bgt_s'          => 'l',
    'bgt_un'         => 'l',
    'bgt_un_s'       => 'l',
    'ble'            => 'l',
    'ble_s'          => 'l',
    'ble_un'         => 'l',
    'ble_un_s'       => 'l',
    'blt'            => 'l',
    'blt_s'          => 'l',
    'blt_un'         => 'l',
    'blt_un_s'       => 'l',
    'bne_un'         => 'l',
    'bne_un_s'       => 'l',
    'box'            => 't',
    'br'             => 'l',
    'br_s'           => 'l',
    'break'          => nil,
    'brfalse'        => 'l',
    'brfalse_s'      => 'l',
    'brtrue'         => 'l',
    'brtrue_s'       => 'l',
    'call'           => 'mc',  # todo: call can take either a constructor ref or a method ref
    'calli'          => nil,   # need to special-case this?
    'callvirt'       => 'm',   # need to special-case this?
    'castclass'      => 't',
    'ceq'            => nil,
    'cgt'            => nil,
    'cgt_un'         => nil,
    'ckfinite'       => nil,
    'clt'            => nil,
    'clt_un'         => nil,
    'constrained'    => 't',
    'conv_i'         => nil,
    'conv_i1'        => nil,
    'conv_i2'        => nil,
    'conv_i4'        => nil,
    'conv_i8'        => nil,
    'conv_ovf_i'     => nil,
    'conv_ovf_i_un'  => nil,
    'conv_ovf_i1'    => nil,
    'conv_ovf_i1_un' => nil,
    'conv_ovf_i2'    => nil,
    'conv_ovf_i2_un' => nil,
    'conv_ovf_i4'    => nil,
    'conv_ovf_i4_un' => nil,
    'conv_ovf_i8'    => nil,
    'conv_ovf_i8_un' => nil,
    'conv_ovf_u'     => nil,
    'conv_ovf_u_un'  => nil,
    'conv_ovf_u1'    => nil,
    'conv_ovf_u1_un' => nil,
    'conv_ovf_u2'    => nil,
    'conv_ovf_u2_un' => nil,
    'conv_ovf_u4'    => nil,
    'conv_ovf_u4_un' => nil,
    'conv_ovf_u8'    => nil,
    'conv_ovf_u8_un' => nil,
    'conv_r_un'      => nil,
    'conv_r4'        => nil,
    'conv_r8'        => nil,
    'conv_u'         => nil,
    'conv_u1'        => nil,
    'conv_u2'        => nil,
    'conv_u4'        => nil,
    'conv_u8'        => nil,
    'cpblk'          => nil,
    'cpobj'          => 't',
    'div'            => nil,
    'div_un'         => nil,
    'dup'            => nil,
    'endfilter'      => nil,
    'endfinally'     => nil,
    'initblk'        => nil,
    'initobj'        => 't',
    'isinst'         => 't',
    'jmp'            => 'm',
    'ldarg'          => 'i16',
    'ldarg_0'        => nil,
    'ldarg_1'        => nil,
    'ldarg_2'        => nil,
    'ldarg_3'        => nil,
    'ldarg_s'        => 'u8',
    'ldarga'         => 'i16',
    'ldarga_s'       => 'u8',
    'ldc_i4'         => 'i32',
    'ldc_i4_0'       => nil,
    'ldc_i4_1'       => nil,
    'ldc_i4_2'       => nil,
    'ldc_i4_3'       => nil,
    'ldc_i4_4'       => nil,
    'ldc_i4_5'       => nil,
    'ldc_i4_6'       => nil,
    'ldc_i4_7'       => nil,
    'ldc_i4_8'       => nil,
    'ldc_i4_m1'      => nil,
    'ldc_i4_s'       => 'i8',
    'ldc_i8'         => 'i64',
    'ldc_r4'         => 'd',
    'ldc_r8'         => 'd',
    'ldelem'         => 't',
    'ldelem_i'       => nil,
    'ldelem_i1'      => nil,
    'ldelem_i2'      => nil,
    'ldelem_i4'      => nil,
    'ldelem_i8'      => nil,
    'ldelem_r4'      => nil,
    'ldelem_r8'      => nil,
    'ldelem_ref'     => nil,
    'ldelem_u1'      => nil,
    'ldelem_u2'      => nil,
    'ldelem_u4'      => nil,
    'ldelema'        => 't',
    'ldfld'          => 'f',
    'ldflda'         => 'f',
    'ldftn'          => 'm',
    'ldind_i'        => nil,
    'ldind_i1'       => nil,
    'ldind_i2'       => nil,
    'ldind_i4'       => nil,
    'ldind_i8'       => nil,
    'ldind_r4'       => nil,
    'ldind_r8'       => nil,
    'ldind_ref'      => nil,
    'ldind_u1'       => nil,
    'ldind_u2'       => nil,
    'ldind_u4'       => nil,
    'ldlen'          => nil,
    'ldloc'          => 'v',
    'ldloc_0'        => nil,
    'ldloc_1'        => nil,
    'ldloc_2'        => nil,
    'ldloc_3'        => nil,
    'ldloc_s'        => 'v',
    'ldloca'         => 'v',
    'ldloca_s'       => 'v',
    'ldnull'         => nil,
    'ldobj'          => 't',
    'ldsfld'         => 'f',
    'ldsflda'        => 'f',
    'ldstr'          => 's',
#    'ldtoken'        => nil, # handled as special case
    'ldvirtftn'      => 'm',
    'leave'          => 'l',
    'leave_s'        => 'l',
    'localloc'       => nil,
    'mkrefany'       => 't',
    'mul'            => nil,
    'mul_ovf'        => nil,
    'mul_ovf_un'     => nil,
    'neg'            => nil,
    'newarr'         => 't',
    'newobj'         => 'c',
    'nop'            => nil,
    'not'            => nil,
    'or'             => nil,
    'pop'            => nil,
    'readonly'       => nil,    
    'refanytype'     => nil,
    'refanyval'      => 't',
    'rem'            => nil,
    'rem_un'         => nil,
    'ret'            => nil,
    'rethrow'        => nil,
    'shl'            => nil,
    'shr'            => nil,
    'shr_un'         => nil,
    'sizeof'         => 't',
    'starg'          => 'i32',
    'starg_s'        => 'u8',
    'stelem'         => 't',
    'stelem_i'       => nil,
    'stelem_i1'      => nil,
    'stelem_i2'      => nil,
    'stelem_i4'      => nil,
    'stelem_i8'      => nil,
    'stelem_r4'      => nil,
    'stelem_r8'      => nil,
    'stelem_ref'     => nil,
    'stfld'          => 'f',
    'stind_i'        => nil,
    'stind_i1'       => nil,
    'stind_i2'       => nil,
    'stind_i4'       => nil,
    'stind_i8'       => nil,
    'stind_r4'       => nil,
    'stind_r8'       => nil,
    'stind_ref'      => nil,
    'stloc'          => 'v',
    'stloc_0'        => nil,
    'stloc_1'        => nil,
    'stloc_2'        => nil,
    'stloc_3'        => nil,
    'stloc_s'        => 'v',
    'stobj'          => 't',
    'stsfld'         => 'f',
    'sub'            => nil,
    'sub_ovf'        => nil,
    'sub_ovf_un'     => nil,
    'switch'         => 'sw',
    'tailcall'       => nil,
    'throw_ex'       => nil,
    'unaligned'      => 'v',
    'unbox'          => 't',
    'unbox_any'      => 't',
    'volatile'       => nil,
    'xor'            => nil
  }
end
